(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1664:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(1),s=a.n(r),i=a(2),c=function(e){var t=[],a=Object(i.get)(e.content[e.contentType],e.id,{});return Object(i.forEach)(e.fields,function(n){if(Object(i.includes)(["text","number","email","password","date","datetime-local","time","range","color","boolean","checkbox"],n.type)&&t.push(o.a.createElement("div",{key:"form_content_"+n.key},o.a.createElement("p",null,o.a.createElement("strong",null,n.title,": "),a[n.key]?a[n.key].replace(/(<([^>]+)>)/gi,""):null))),Object(i.includes)(["textarea","wysiwyg"],n.type)&&t.push(o.a.createElement("div",{key:"form_content_"+n.key},o.a.createElement("p",null,o.a.createElement("strong",null,n.title,": "),o.a.createElement("br",null),a[n.key]?a[n.key].replace(/(<([^>]+)>)/gi,""):null))),Object(i.includes)(["relational","select","radio"],n.type)){var r=a[n.key],s=Object(i.isArray)(r)?r:[r],c="relational"===n.type?Object(i.toArray)(Object(i.get)(e.content,n.relation,[])):n.options,l=[];Object(i.forEach)(s,function(e,t){if("relational"===n.type){var a=Object(i.get)(c,e,{}),r=a.title||a.name||a.heading;r&&l.push(o.a.createElement("span",{key:"response_"+n.key+"_"+t},n.multiple?o.a.createElement("span",null,o.a.createElement("br",null)," - ",r):o.a.createElement("span",null,r)))}else{var s=Object(i.find)(c,["value",e]);s&&l.push(o.a.createElement("span",{key:"response_"+n.key+"_"+t},n.multiple?o.a.createElement("span",null,o.a.createElement("br",null)," - ",s.label):o.a.createElement("span",null,s.label)))}}),t.push(o.a.createElement("div",{key:"form_content_"+n.key},o.a.createElement("p",null,o.a.createElement("strong",null,n.title,": "),l)))}}),o.a.createElement("div",null,t)};c.propTypes={id:s.a.oneOfType([s.a.string,s.a.number]),contentType:s.a.string,content:s.a.object,fields:s.a.array},t.a=c},1665:function(e,t,a){e.exports={paddedHolder:"components-modules-ContentEditor-styles__paddedHolder--NICH3jFs",contentForm:"components-modules-ContentEditor-styles__contentForm--3Q8oxyxZ",contentModalContentContainer:"components-modules-ContentEditor-styles__contentModalContentContainer--1aSUlyNk"}},768:function(e,t,a){"use strict";a.r(t),function(e){var n=a(95),o=a.n(n),r=a(14),s=a.n(r),i=a(16),c=a.n(i),l=a(20),m=a.n(l),p=a(86),d=a.n(p),u=a(34),h=a.n(u),f=a(33),b=a.n(f),v=a(31),y=a.n(v),g=a(29),k=a.n(g),E=a(38),j=a.n(E),O=a(25),C=a.n(O),w=a(30),x=a.n(w),_=a(72),D=a.n(_),I=a(26),T=a(0),S=a.n(T),P=a(60),F=a(1),M=a.n(F),N=a(48),B=a(15),A=a(1763),H=a(1661),U=a.n(H),R=a(1663),z=a(2),V=a(42),K=a.n(V),W=a(115),q=a(39),G=a(47),L=a(167),J=a(813),Q=a(1664),Y=a(789),Z=a(313),X=a(856),$=a(312),ee=a(169),te=a(4),ae=a(10),ne=a(56),oe=a(8),re=a(1665),se=a.n(re),ie=void 0,ce={},le=function(e){function t(e){var a=this;k()(this,t);var n,o=C()(this,(t.__proto__||y()(t)).call(this,e));return o.onCheckboxClick=function(e,t){e.target.checked?o.selectedIds.push(t):Object(z.pull)(o.selectedIds,t)},o.setFormData=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o.formData=e,t&&o.state.editorErrors&&o.state.editorErrors[t]){var n=Object(z.cloneDeep)(o.state.editorErrors);delete n[t],o.setState({editorErrors:n})}a||(oe.h.setItem(o.getBrowserPersistenceKey(),e),o.setState({unsavedContent:e}))},o.deleteBulk=function(){var e=void 0;switch(o.props.match.params.type){case"single":e="environments/"+o.props.environment+"/content/",o.selectedIds=!Object(z.isEmpty)(o.selectedIds)&&Object(z.isArray)(o.selectedIds)?o.selectedIds.map(function(e){return e+"/"+o.props.locale}):[];break;default:e="environments/"+o.props.environment+"/content/"+o.props.match.params.schema+"/"+o.props.locale+"/"}o.props.removeMulti(e,o.selectedIds,function(e){e&&Object(z.pullAll)(o.selectedIds,e)})},o.deleteEntry=function(e){o.props.removeItem("environments/"+o.props.environment+"/content/"+o.props.match.params.schema+"/"+o.props.locale+"/"+e)},o.viewForm=function(e){var t=S.a.createElement("div",null,S.a.createElement(ee.a,{key:"Toolbar",title:"View Form",sticky:!0},S.a.createElement(q.a,{onClick:function(){return o.props.toggleModal({modalId:"contentModal",show:!1})}},"Close")),S.a.createElement("div",{className:se.a.contentModalContentContainer},S.a.createElement(Q.a,{id:e,content:Object(z.get)(o.props.firebase,"environments."+o.props.environment+".content",{}),media:Object(z.get)(o.props.firebase,"media",{}),contentType:o.props.match.params.schema,fields:Object(z.get)(o.props.firebase,"environments."+o.props.environment+".schemas."+o.props.match.params.schema+".fields",[])})));o.props.toggleModal({modalId:"contentModal",show:!0,content:t,size:"large"})},o.confirmDelete=function(e){var t=S.a.createElement(L.a,{title:"Delete Entry",body:"Are you sure you want to delete this item?",type:"error",buttons:[{themeType:"ghost",text:"Cancel",onClick:function(){return o.props.toggleModal({modalId:"contentModal",show:!1})}},{themeType:"error",text:"Delete",onClick:function(){o.deleteEntry(e),o.props.toggleModal({modalId:"contentModal",show:!1})}}]});o.props.toggleModal({modalId:"contentModal",show:!0,content:t,size:"small"})},o.getGroupedSchemas=function(e){return Object(z.reduce)(e,function(e,t){var a="single"===t.type?t.group:t.title,n=t.id,o=t.icon,r=t.title,s=t.type,i=t.enabled;return i&&Object(ne.b)({userPermissions:ie,module:n,action:"view"})?b()({},e,h()({},a,{id:n,icon:o,title:r,type:s,enabled:i,schemaIds:Object(z.get)(e,"["+a+"].schemaIds")?e[a].schemaIds.concat(n):[n]})):e},{})},o.filterCollection=function(e){var t=o.props,a=t.location,n=t.environment,r=t.locale,s=t.firebase,i=t.match,c=U.a.parse(a.search),l=Object(z.get)(c,"f","").trim();try{if(l){var m=Object(z.get)(s,"environments."+n+".schemas["+i.params.schema+"].fields",[]),p=m.filter(function(e){return e.show}).map(function(e){return e.key}),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id"],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",o=arguments[3];if(o){var i=Object(z.get)(s,"environments."+n+".content",{}),c=Object(z.isArray)(o)?o:[o],l=function(e,t){return Object(z.without)(Object(z.toArray)(Object(z.cloneDeep)(Object(z.get)(e,t+"."+r,Object(z.get)(e,t,[])))),void 0)}(i,e);return c.map(function(e){var n=Object(z.find)(l,{id:e});return n?Object(z.values)(Object(z.pick)(n,t)).join(" "+a+" "):""})}return[]};return Object(z.isUndefined)(ce.filterCollection)&&(ce.filterCollection=Object(z.memoize)(function(e,t,a){var n=new RegExp(t,"i");return a.filter(function(t){return e.some(function(e){var a=m.find(function(t){return t.key===e});return(Boolean(Object(z.get)(a,"relation"))?u(Object(z.get)(a,"relation"),Object(z.get)(a,"relationalFieldsToShow"),Object(z.get)(a,"fieldSeparator"),Object(z.get)(t,e)):Object(z.get)(t,e,"")).toString().match(n)})})},function(e,t,a){return t+"_"+e.join("-")+"_"+d()(a)})),ce.filterCollection(p,l,e)}}catch(t){return Object(ae.d)(t),e}return e},o.getEditorConstraints=function(e){return Object(z.reduce)(e,function(e,t){return Object(z.assign)({},e,h()({},t.key,Object(ae.e)(t.constraints)))},{})},o.saveData=(n=m()(s.a.mark(function e(t,n,r){var i,l,m,p,d,u,f,b,v,y,g,k,E;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=o.props,l=i.environment,m=i.locale,p=i.match,d=i.history,u=i.location,f=i.setItem,b=i.addNotification,Object(z.result)(t,"preventDefault"),o.setState({isSaving:!0}),!o.formData){e.next=24;break}v=r.filter(function(e){return e.hasOwnProperty("defaultValue")}).reduce(function(e,t){return c()(e,h()({},t.key,t.defaultValue))},{}),y=Object(z.defaults)(o.formData,v),g=void 0;try{g=K()(y,n)}catch(e){o.setState({isSaving:!1}),Object(ae.d)(e,{extra:{formData:y,constraints:n}})}if(g){e.next=20;break}return k=Object(z.cloneDeep)(y),Object(z.forEach)(k,function(e,t){(Object(z.isNull)(e)||Object(z.isUndefined)(e))&&delete k[t],Object(z.isArray)(e)&&(k[t]=Object(z.without)(e,null,void 0))}),E=void 0,"single"===p.params.type?(k.id="new"!==p.params.id?p.params.id:p.params.schema,E={strict:!0,path:"environments/"+l+"/content/"+k.id+"/"+m}):(k.id="new"!==p.params.id?parseInt(p.params.id,10):Date.now(),E="environments/"+l+"/content/"+p.params.schema+"/"+m),e.next=16,f(E,k);case 16:return o.setState({isSaving:!1}),o.removeTemporaryBrowserPersistence(),"new"===p.params.id&&d.push("/"+u.pathname.split("/").slice(1,-1).join("/")+"/"+k.id),e.abrupt("return");case 20:o.setState(function(){return{editorErrors:g,isSaving:!1}}),b({body:"notifications.forms.save_failed_validation",type:"error",autoClose:5e3}),e.next=26;break;case 24:o.setState({isSaving:!1}),b({body:"notifications.forms.save_failed_no_changes",type:"warning",autoClose:5e3});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(0),Object(ae.d)(e.t0);case 31:case"end":return e.stop()}},e,a,[[0,28]])})),function(e,t,a){return n.apply(this,arguments)}),o.handleFilterChange=function(e){e.preventDefault();var t=Object(z.get)(e,"target",{}).value,a=Object(z.get)(o.props,"match.url","");o.props.history.replace(t?a+"?f="+t:a)},o.getBrowserPersistenceKey=function(){return o.props.environment+"|"+o.props.locale+"|"+o.props.match.url},o.removeTemporaryBrowserPersistence=m()(s.a.mark(function e(){var t,n,r,i,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.h.removeItem(o.getBrowserPersistenceKey());case 3:t=o.props,n=t.match,r=t.firebase,i=t.locale,c=t.environment,l="single"===n.params.type?"environments."+c+".content."+n.params.schema+"."+i:"environments."+c+".content."+n.params.schema+"."+i+"."+n.params.id,o.formData=Object(z.cloneDeep)(Object(z.get)(r,l,{})),o.unsavedFields=null,o.setState({retrievedUnsavedContent:!1,unsavedContent:null}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),Object(ae.d)(e.t0);case 13:case"end":return e.stop()}},e,a,[[0,10]])})),o.goBack=function(){var e=o.props,t=e.match,a=e.loadComplete,n=e.environment,r=e.firebase,s=e.history,i=void 0;if(!t.params.type&&a)i=null;else if(t.params.type&&!t.params.id&&a)i="/content";else if(t.params.id&&"single"===t.params.type&&a){var c=Object(z.get)(r,"environments."+n+".schemas."+t.params.schema+".group");i="/content/"+t.params.type+"/"+c}else t.params.id&&a&&(i="/content/"+t.params.type+"/"+t.params.schema);s.push(i)},o.showUnsavedChangesDialog=function(){var e,t=o.props,n=t.environment,r=t.match,i=t.toggleModal,c=S.a.createElement(L.a,{title:"You have unsaved changes",body:"Do you want to discard or save the changes?",type:"warning",loading:o.state.isSaving,buttons:[{themeType:"ghost",text:"Discard Changes",onClick:function(){o.removeTemporaryBrowserPersistence(),i({modalId:"contentModal",show:!1}),o.goBack()}},{text:"Save Changes",onClick:(e=m()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(z.get)(o.props,"firebase.environments."+n+".schemas."+r.params.schema+".fields"),e.next=4,o.saveData({},o.getEditorConstraints(t),t);case 4:i({modalId:"contentModal",show:!1}),o.goBack(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Object(ae.d)(e.t0);case 11:case"end":return e.stop()}},e,a,[[0,8]])})),function(){return e.apply(this,arguments)})}]});i({modalId:"contentModal",show:!0,content:c,size:"small"})},o.handleBackAction=function(){oe.h.getItem(o.getBrowserPersistenceKey()).then(function(e){e?o.showUnsavedChangesDialog():o.goBack()}).catch(function(){o.goBack()})},o.selectedIds=[],o.state={editorErrors:void 0,isSaving:!1,retrievedUnsavedContent:!1,unsavedContent:null,showUnsavedNotification:!1},o}return x()(t,e),j()(t,[{key:"componentWillMount",value:function(){this.formData={},this.unsavedFields=null,this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.match,n=t.environment,o=t.locale;if(ie=this.context.userPermissions,e.match.params.id!==a.params.id&&(this.formData={},this.unsavedFields=null,this.setState({editorErrors:void 0,retrievedUnsavedContent:!1,unsavedContent:null})),e.firebase&&e.match.params.id&&a.params.id!==e.match.params.id||a.params.id&&e.firebase&&!Object(z.keys)(this.formData).length){var r="single"===e.match.params.type?"environments."+n+".content."+e.match.params.schema+"."+o:"environments."+n+".content."+e.match.params.schema+"."+o+"."+e.match.params.id;this.formData=Object(z.cloneDeep)(Object(z.get)(e.firebase,r,{}))}}},{key:"getSchemaTitle",value:function(){if(this.props.match.params.schema&&this.props.firebase){return" / "+("single"===this.props.match.params.type?Object(z.get)(this.props.firebase,"environments."+this.props.environment+".schemas."+this.props.match.params.schema+".group",this.props.match.params.schema):Object(z.get)(this.props.firebase,"environments."+this.props.environment+".schemas."+this.props.match.params.schema+".title",this.props.match.params.schema))}return""}},{key:"getEntryTitle",value:function(){if(this.props.match.params.id&&this.props.firebase){var e=void 0;if("new"===this.props.match.params.id)e="New Entry";else if("single"===this.props.match.params.type)e=Object(z.get)(this.props.firebase,"environments."+this.props.environment+".content."+this.props.match.params.id+"."+this.props.locale+".title","");else{var t=Object(z.get)(this.props.firebase,"environments."+this.props.environment+".content."+this.props.match.params.schema+"."+this.props.locale+"."+this.props.match.params.id,{});e=t.title||t.name||t.heading||t.title1||t.titleA||t.id}return" / "+e}return""}},{key:"showOptionCards",value:function(){var e=this;if(this.props.loadComplete&&!this.props.match.params.schema){var t=[],a=Object(z.get)(this.props.firebase,"environments."+this.props.environment+".schemas",{}),n=Object(ne.b)({userPermissions:ie,type:"modules",module:"schemas",action:"create"}),r=0;return o()(a).length?(t=Object(z.map)(this.getGroupedSchemas(a),function(t,a){var n=t.id,s=t.type,i=t.title,c=t.schemaIds,l=void 0,m=void 0,p=void 0;return"single"===s?(r=c.length,m=t.icon||"MdInsertDriveFile",p="/content/"+s+"/"+a):(l=Object(z.get)(e.props.firebase,"environments."+e.props.environment+".content."+n+"."+e.props.locale,{}),r=l?o()(l).length:"0",m=t.icon||"form"===s?"MdDrafts":"MdViewModule",p="/content/"+s+"/"+n),Object(ne.b)({userPermissions:ie,module:n,action:"any"})&&S.a.createElement(B.Col,{key:"schema_link_"+n,xs:12,sm:12,md:6,lg:3},S.a.createElement(A.a,{to:p},S.a.createElement(Z.a,{title:"single"===s?a:i,description:s,circleIcon:S.a.createElement(G.a,{icon:m}),circleHoverIcon:r,actions:[{title:"View",link:"",linkClickAction:function(){}}]})))}),n&&t.splice(0,0,S.a.createElement(B.Col,{key:"schema_link_can_create",xs:12,sm:12,md:6,lg:3},S.a.createElement(A.a,{to:"/schemas/new"},S.a.createElement($.a,{title:"New Schema"}))))):t=n?S.a.createElement(B.Col,{xs:12,sm:12,md:6,lg:3},S.a.createElement(A.a,{to:"/schemas/new"},S.a.createElement($.a,{title:"New Schema"}))):S.a.createElement(B.Col,null,S.a.createElement("h4",null,"No content schemas has been created for this project yet")),S.a.createElement(B.Row,{start:"xs",className:se.a.paddedHolder},t)}return null}},{key:"showDataGrid",value:function(){var e=this;if(this.props.loadComplete&&this.props.match.params.schema&&!this.props.match.params.id){if("single"===this.props.match.params.type){var t=[];Object(z.forEach)(Object(z.get)(this.props.firebase,"environments."+this.props.environment+".schemas"),function(a){var n=a.group,o=a.id,r=a.type;n===e.props.match.params.schema&&"single"===r&&Object(ne.b)({userPermissions:ie,module:o,action:"view"})&&t.push(o)});var a=t.map(function(t){var a=Object(z.get)(e.props.firebase,"environments."+e.props.environment+".content."+t+"."+e.props.locale,{}),n=Object(z.get)(e.props.firebase,"environments."+e.props.environment+".schemas."+t,{});return{id:Object(z.get)(a,"id","new"),title:n.title,entryType:n.id,entryTitle:Object(z.get)(a,"title"),enabled:n.enabled}}).filter(function(e){return e.enabled}),n=[{title:this.props.match.params.schema,key:"title",show:!0,type:"text"},{title:"Title",key:"entryTitle"}];return S.a.createElement(Y.a,{collection:a,dataType:"single",schema:n,actions:[{text:"Edit",icon:"MdEdit",url:"/content/"+this.props.match.params.type,individualPermissionCheck:function(e){return Object(ne.b)({userPermissions:ie,module:e,action:"update"})}}],bulkActions:[],onCheckboxClick:this.onCheckboxClick,content:Object(z.get)(this.props.firebase,"environments."+this.props.environment+".content",{}),media:Object(z.get)(this.props.firebase,"media",{})})}var o=Object(z.get)(this.props.firebase,"environments."+this.props.environment+".content."+this.props.match.params.schema+"."+this.props.locale,[]);o=Object(z.isArray)(o)?o:Object(z.toArray)(o);var r=Object(z.get)(this.props.firebase,"environments."+this.props.environment+".schemas."+this.props.match.params.schema+".fields",[]);return S.a.createElement(Y.a,{collection:this.filterCollection(o),schema:r,actions:[{text:"View",icon:"FaEye",onClick:"form"===this.props.match.params.type&&Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"view"})||Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"view"})&&!Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"update"})?this.viewForm:null},{text:"Edit",icon:"MdEdit",url:Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"update"})&&"/content/"+this.props.match.params.type+"/"+this.props.match.params.schema},{text:"Delete",icon:"MdDelete",onClick:Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"delete"})&&this.confirmDelete}],bulkActions:Object(ne.b)({userPermissions:ie,module:this.props.match.params.schema,action:"delete"})&&[{text:"Delete Selected",action:this.deleteBulk}],onCheckboxClick:this.onCheckboxClick,content:Object(z.get)(this.props.firebase,"environments."+this.props.environment+".content",{}),media:Object(z.get)(this.props.firebase,"media",{})})}return null}},{key:"showForm",value:function(){var e=this,t=this.props,a=t.environment,n=t.match,o=t.loadComplete,r=t.firebase,s=Object(z.get)(this.props,"firebase.environments."+a+".schemas."+n.params.schema+".fields");if(n.params.id&&o&&s){if(!this.state.retrievedUnsavedContent)return oe.h.getItem(this.getBrowserPersistenceKey()).then(function(t){t&&(e.unsavedFields=Object(R.a)(e.formData,t).map(function(e){return e.path.join(".")}),e.formData=b()({},e.formData,t)),e.setState({retrievedUnsavedContent:!0,unsavedContent:t,showUnsavedNotification:!!t})}).catch(function(){e.setState({retrievedUnsavedContent:!0,unsavedContent:null,showUnsavedNotification:!1})}),null;var i=this.getEditorConstraints(s);return S.a.createElement("div",{className:se.a.paddedHolder},this.state.unsavedContent&&this.state.showUnsavedNotification&&S.a.createElement(X.a,{type:"info",body:"notifications.unsaved_changes_detected",attr:{saveAction:S.a.createElement("span",{className:"underline",role:"presentation",onClick:function(){return e.formSubmit.click()}},S.a.createElement(N.a,{id:"global.save"})),resetAction:S.a.createElement("span",{className:"underline",role:"presentation",onClick:this.removeTemporaryBrowserPersistence},S.a.createElement(N.a,{id:"global.reset"}))},onClick:function(){return e.setState({showUnsavedNotification:!1})}}),S.a.createElement("form",{ref:function(t){e.form=t},onSubmit:function(t){return e.saveData(t,i,s)},className:se.a.contentForm,noValidate:!0},S.a.createElement(J.a,{onSubmit:this.setFormData,setFormData:this.setFormData,fields:s,unsavedFields:this.unsavedFields,formErrors:this.state.editorErrors,formData:this.formData,editorConstraints:i,content:Object(z.get)(r,"environments."+a+".content",{}),media:Object(z.get)(r,"media",{})}),S.a.createElement("button",{ref:function(t){e.formSubmit=t},className:"hide",type:"submit"},"submit")))}return null}},{key:"render",value:function(){var e=this,t=this.props,a=t.match,n=t.loadComplete,o=t.locale,r=t.firebase,s=t.environment,i=n?"Edit Content "+this.getSchemaTitle()+" "+this.getEntryTitle():"Loading...";return S.a.createElement("div",null,S.a.createElement(D.a,{title:i}),S.a.createElement(ee.a,{title:i,backAction:this.handleBackAction,sticky:Boolean(a.params.type)},a.params.schema&&n&&!a.params.id&&Object(z.keys)(Object(z.get)(r,"environments."+s+".content."+a.params.schema+"."+o,{})).length>0&&S.a.createElement("input",{onChange:this.handleFilterChange,placeholder:"Filter",type:"text",className:"filterInput"}),a.params.schema&&n&&"collection"===a.params.type&&!a.params.id&&Object(z.keys)(Object(z.get)(r,"environments."+s+".content."+a.params.schema+"."+o,{})).length>0&&Object(z.get)(r,"environments."+s+".schemas."+a.params.schema+".sortable",!1)&&Object(ne.b)({userPermissions:ie,module:a.params.schema,action:"update"})&&S.a.createElement(A.a,{to:"/sort/"+a.params.type+"/"+a.params.schema},S.a.createElement(q.a,{iconOnly:!0,title:"Structure Collection"},S.a.createElement(G.a,{icon:"FaList"}))),n&&a.params.schema&&"single"!==a.params.type&&!a.params.id&&Object(ne.b)({userPermissions:ie,module:a.params.schema,action:"create"})&&S.a.createElement(A.a,{to:"/content/"+a.params.type+"/"+a.params.schema+"/new"},S.a.createElement(q.a,null,"New Entry")),n&&!a.params.schema&&!a.params.id&&Object(ne.b)({userPermissions:ie,type:"modules",module:"schemas",action:"create"})&&S.a.createElement(A.a,{to:"/schemas/new"},S.a.createElement(q.a,null,"New Schema")),a.params.id&&this.state.unsavedContent&&S.a.createElement(q.a,{themeType:"ghost",onClick:this.removeTemporaryBrowserPersistence},"Reset Changes"),a.params.id&&n&&Object(ne.b)({userPermissions:ie,module:a.params.schema,action:"update"})&&S.a.createElement(q.a,{disabled:this.state.isSaving,onClick:function(){return e.formSubmit.click()}},this.state.isSaving?"Saving...":"Save")),S.a.createElement(B.Row,null,S.a.createElement(B.Col,{xs:12},this.showOptionCards(),this.showDataGrid(),this.showForm())))}}]),t}(W.a);le.propTypes={firebase:M.a.any,loadComplete:M.a.bool,match:M.a.object.isRequired,location:M.a.object,history:M.a.object.isRequired,setModalContent:M.a.func,setItem:M.a.func,removeItem:M.a.func,removeMulti:M.a.func,addNotification:M.a.func,toggleModal:M.a.func};t.default=Object(I.b)(function(e){var t=e.currentProject;return{firebase:t.firebase,environment:t.environment,locale:t.locale,loadComplete:t.loadComplete}},function(e){return{setItem:function(t,a){return e(te.a.setItem(t,a))},removeItem:function(t){e(te.a.removeItem(t))},removeMulti:function(t,a,n,o){e(te.a.removeMulti(t,a,n,o))},addNotification:function(t){e(te.a.addNotification(t))},toggleModal:function(t){var a=t.modalId,n=t.show,o=t.content,r=t.size;e(te.a.toggleModal({modalId:a,show:n,content:o,size:r}))},setModalContent:function(t){var a=t.modalId,n=t.content;e(te.a.setModalContent({modalId:a,content:n}))}}})(Object(P.hot)(e)(le))}.call(this,a(94)(e))},789:function(e,t,a){"use strict";(function(e){var n=a(0),o=a.n(n),r=a(1),s=a.n(r),i=a(1763),c=a(2),l=a(785),m=a.n(l),p=a(47),d=a(39),u=a(13),h=a(800),f=a.n(h),b=a(787),v=function(t){var a=t.bulkActions&&t.bulkActions.length,n=t.showRowCheckbox,r=t.showColumnCheckbox,s=t.dataType,l=t.onCheckboxClick,h=t.maxHeight,v=t.lazyLoad,y=void 0,g=!Object(c.isEmpty)(t.schema)&&Object(c.isArray)(t.schema)?t.schema.map(function(e,t){return e.show&&o.a.createElement("th",{key:"col_header_"+e.key},r&&t>0&&o.a.createElement(u.d,{noMargin:!0},o.a.createElement(u.b,{largeText:!1,noDescription:!0,checkboxTitle:e.title,inputProps:{id:e.key,name:"bulk_toggle",onChange:function(t){return l(t,e.key)}}})),(!r||0===t)&&e.title)}):[];g.push(o.a.createElement("th",{className:f.a.actionsHeader,key:"col_header_actions"},Object(c.result)(t,"actionsHeader"))),(a||n)&&g.splice(0,0,o.a.createElement("th",{className:f.a.checkboxColumn,key:"col_header_checkbox"},o.a.createElement("label",{htmlFor:"toggleAll"},o.a.createElement(u.b,{noDescription:!0,inputProps:{id:"toggleAll",onClick:function(a){var n=a.target.checked;e("#"+t.id+' [name="bulk_toggle"]').each(function(){var t=e(this).prop("checked");(!t&&n||t&&!n)&&e(this).click()})}}}))));var k=t.collection.map(function(e,r){var l=e,h=l.id,y=l.entryType,g=t.schema.map(function(a){var n=a.show,s=a.key,i=a.type;return n?o.a.createElement("td",{key:h+"_"+s},function(e,t){var a=t.row,n=t.rowIndex,r=t.value,s=t.schema,i=t.content,l=t.media;if(Object(c.isFunction)(e))return e({row:a,rowIndex:n,value:r,schema:s,content:i,media:l});if(b.a[e]){var m=b.a[e].renderInTable;return o.a.createElement(m,{row:a,rowIndex:n,value:r,schema:s,content:i,media:l})}return o.a.createElement("pre",null,'No "',e,'" data field implemented')}(i,{row:e,rowIndex:r,value:e[s],schema:a,content:t.content,media:t.media})):null}),k=t.actions&&t.actions.length?t.actions.map(function(e){var t=e.text,a=e.url,n=e.onClick,m=e.icon,u=e.toggleProp,b=e.disabled,v=void 0===b?function(){return!1}:b,g=e.individualPermissionCheck,k=r+"_"+t+"_action_btn";if((void 0===g?function(){return!0}:g)("new"===h?y:h)){if(a)return o.a.createElement(i.a,{key:k,to:a+"/"+("single"!==s?""+h:y+"/"+h)},o.a.createElement(d.a,{iconOnly:!0,circular:!0,className:f.a.actionIcon,title:Object(c.isFunction)(t)?t(l[u]):t,disabled:v(h)},o.a.createElement(p.a,{icon:m})));if(n)return o.a.createElement(d.a,{iconOnly:!0,circular:!0,key:k,onClick:function(){return n(h)},title:Object(c.isFunction)(t)?t(l[u]):t,className:f.a.actionIcon,disabled:v(h)},o.a.createElement(p.a,{icon:Object(c.isFunction)(m)?m(l[u]):m}))}return null}):null;if(g.push(o.a.createElement("td",{className:f.a.actions,key:h+"_edit_action"},k)),a||n){var E="checkbox_"+h+"_td";g.splice(0,0,o.a.createElement("td",{className:f.a.checkboxColumn,key:E},o.a.createElement("label",{htmlFor:E},o.a.createElement(u.b,{noDescription:!0,inputProps:{id:E,name:"bulk_toggle",onChange:function(e){return t.onCheckboxClick(e,h)}}}))))}return v?o.a.createElement(m.a,{key:"row_"+h,height:56,offset:100,overflow:!0,placeholder:o.a.createElement("tr",{style:{height:56},className:"lazyload-placeholder"})},o.a.createElement("tr",null,g)):o.a.createElement("tr",{key:"row_"+h},g)});return o.a.createElement("div",{className:t.boxShadow?f.a.boxShadow:null},o.a.createElement("table",{id:t.id,className:f.a.tableFixed},o.a.createElement("thead",null,o.a.createElement("tr",null,g)),o.a.createElement("tbody",{style:h&&{maxHeight:h}},k.length&&k||o.a.createElement("tr",null,o.a.createElement("td",{style:{padding:"25px 10px"},colSpan:g.length},"No entries found"))),o.a.createElement("tfoot",null,o.a.createElement("tr",null,a?o.a.createElement("th",{className:f.a.actions},o.a.createElement("span",{className:"selectWrap"},o.a.createElement("select",{className:"selectWithArrow",ref:function(e){y=e}},o.a.createElement("option",{value:""},"Bulk Action"),t.bulkActions?t.bulkActions.map(function(e,t){var a=e.text;return o.a.createElement("option",{key:"bulk_options_"+Object(c.kebabCase)(a),value:t},a)}):null),o.a.createElement("span",{className:"selectArrow"})),o.a.createElement(d.a,{onClick:function(){var e=y.options[y.selectedIndex].value;""!==e&&t.bulkActions[e].action()}},"Confirm")):null))))};v.propTypes={collection:s.a.array,content:s.a.object,media:s.a.object,schema:s.a.array,actions:s.a.array,actionsHeader:s.a.oneOfType([s.a.func,s.a.string,s.a.node]),onCheckboxClick:s.a.func,showColumnCheckbox:s.a.bool,showRowCheckbox:s.a.bool,lazyLoad:s.a.bool,boxShadow:s.a.bool,bulkActions:s.a.oneOfType([s.a.array,s.a.bool]),dataType:s.a.string,id:s.a.string,maxHeight:s.a.string},v.defaultProps={onCheckboxClick:function(){},lazyLoad:!1,showColumnCheckbox:!1,showRowCheckbox:!1,boxShadow:!1,bulkActions:!1,dataType:"collection",id:"displayTable",collection:[],content:{},media:{},schema:[],actions:[],actionsHeader:null,maxHeight:null},t.a=v}).call(this,a(231))},800:function(e,t,a){e.exports={boxShadow:"components-ui-DisplayTable-styles__boxShadow--QMzjMBeD",actions:"components-ui-DisplayTable-styles__actions--23KyB5d7",actionIcon:"components-ui-DisplayTable-styles__actionIcon--OdSxqBlN",tableFixed:"components-ui-DisplayTable-styles__tableFixed--1Lkc19W9",actionsHeader:"components-ui-DisplayTable-styles__actionsHeader--TGIh7fGh",checkboxColumn:"components-ui-DisplayTable-styles__checkboxColumn--osBMdnP5",imageHolder:"components-ui-DisplayTable-styles__imageHolder--3-f8sVV0"}},813:function(e,t,a){"use strict";var n=a(33),o=a.n(n),r=a(88),s=a.n(r),i=a(0),c=a.n(i),l=a(1),m=a.n(l),p=a(2),d=a(42),u=a.n(d),h=a(15),f=a(31),b=a.n(f),v=a(29),y=a.n(v),g=a(38),k=a.n(g),E=a(25),j=a.n(E),O=a(30),C=a.n(O),w=a(13),x=a(10),_=function(e){function t(){var e,a,n,o;y()(this,t);for(var r=arguments.length,s=Array(r),i=0;i<r;i++)s[i]=arguments[i];return a=n=j()(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(s))),n.state={hasError:!1},o=a,j()(n,o)}return C()(t,e),k()(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0}),Object(x.d)(e,{extra:t})}},{key:"render",value:function(){return this.state.hasError?c.a.createElement(w.c,null,c.a.createElement("span",{role:"img","aria-label":"scream-cat-emoji"},"🙀")," ","This data field has crashed. The problem is most likely related to the data supplied to the field. Please join our"," ",c.a.createElement("a",{href:"https://flamelink.io/slack",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("strong",null,"Slack community"))," ","if you get stuck so that one of our helpful community members can try and assist you."):this.props.children}}]),t}(i.Component);_.propTypes={children:m.a.any},_.defaultProps={children:null};var D=_,I=a(787),T=function(e){var t=e.fields,a=e.formData,n=e.formErrors,r=e.content,i=e.media,l=e.setFormData,m=e.editorConstraints,d=function(e){var t=e.name,n=e.value,o=e.ignoreChange,r=void 0!==o&&o;return new s.a(function(e,o){return t?(Object(p.set)(a,t,Object(p.isUndefined)(n)?"":n),l(a,t,r),e(u.a.single(n,m[t]))):o(new Error('"name" property needs to be passed back to the "setValue" method. What you passed is: name = \''+t+"' value = '"+n+"'"))})};return c.a.createElement(h.Row,null,t.map(function(e){var t=Object(p.get)(a,e.key,void 0);Object(p.isUndefined)(t)&&(t=e.hasOwnProperty("defaultValue")?e.defaultValue:e.hasOwnProperty("min")?e.min:"");var s="form_field_"+e.key,l=e.gridColumns,m=void 0===l?12:l,u=Object(p.isPlainObject)(m)?m:{xs:m};return c.a.createElement(h.Col,o()({key:s},u),function(e,t){var o=t.field,r=t.value,s=t.content,i=t.media,l=t.formFieldKey;if(I.a[e]){var m=I.a[e].renderInEditor;return c.a.createElement(D,null,c.a.createElement(m,{field:o,value:r,formFieldKey:l,setValue:d,content:s,media:i,formData:a,errors:n?n[o.key]:void 0}))}return c.a.createElement("pre",null,'No "',e,'" data field implemented')}(e.type,{field:e,value:t,content:r,media:i,formFieldKey:s}))}))};T.propTypes={fields:m.a.array.isRequired,formData:m.a.any,formErrors:m.a.object,editorConstraints:m.a.object,content:m.a.object,media:m.a.object,setFormData:m.a.func.isRequired};t.a=T},856:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(1),s=a.n(r),i=a(48),c=a(47),l=a(3),m=a(27),p=l.b.div({position:"relative",marginBottom:"5px",maxHeight:"200px",color:"#fff",overflow:"hidden",borderRadius:"3px",cursor:"pointer",animation:m.a+" 180ms cubic-bezier(.175, .885, .32, 1.27499)"},function(e){return{backgroundColor:e.theme.status[e.type+"Color"],marginBottom:e.withMarginBottom?"30px":"0px"}}),d=l.b.div({position:"absolute",left:0,top:0,height:"100%",width:"30px",color:"rgba(255, 255, 255, .75)",display:"flex",alignItems:"center",justifyContent:"center"," > svg":{opacity:"0.75"}},function(e){return{backgroundColor:e.theme.notifications[e.type+"IconColor"]}}),u=l.b.div({wordBreak:"break-word",padding:"10px 30px 10px 40px",fontSize:"14px",lineHeight:"16px"}),h={success:"FaCheck",error:"FaBan",warning:"FaHandPaperO",info:"FaInfo"},f=function(e){var t=e.icon,a=e.body,n=e.type,r=(e.intl,e.skipTranslate),s=e.attr,l=e.children,m=e.onClick,f=e.withMarginBottom;return o.a.createElement(p,{type:n,onClick:m,withMarginBottom:f},o.a.createElement(d,{type:n},o.a.createElement(c.a,{icon:t||h[n],size:16})),o.a.createElement(u,null,!r&&a&&o.a.createElement(i.a,{id:a,values:s}),r&&a,l))};f.propTypes={intl:s.a.object.isRequired,withMarginBottom:s.a.bool,body:s.a.oneOfType([s.a.string,s.a.node]),children:s.a.node,type:s.a.string,icon:s.a.string,skipTranslate:s.a.bool,attr:s.a.object,onClick:s.a.func},f.defaultProps={icon:null,type:"info",body:null,withMarginBottom:!1,children:null,skipTranslate:!1,attr:{},onClick:function(){}};t.a=Object(i.d)(f)}}]);