(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{1197:function(e,t,a){e.exports={paddedHolder:"components-ui-FileManager-Folders-styles__paddedHolder--3r9BMlv-",minFolderPanelHeight:"components-ui-FileManager-Folders-styles__minFolderPanelHeight--2YheWLtr"}},1198:function(e,t,a){e.exports={fileManager:"components-ui-FileManager-styles__fileManager--CgBtOoFk",optionPanel:"components-ui-FileManager-styles__optionPanel--3FNe9GoI",mediaOption:"components-ui-FileManager-styles__mediaOption--2ks_7AdB",mediaOptionSelected:"components-ui-FileManager-styles__mediaOptionSelected--1MgIDU9u",folderPanel:"components-ui-FileManager-styles__folderPanel--3LmHF13R",dropZone:"components-ui-FileManager-styles__dropZone--2Oq0z8rR",dropZoneText:"components-ui-FileManager-styles__dropZoneText--kSWpi5lw",imgHolder:"components-ui-FileManager-styles__imgHolder--3P1zKutt",verticalPanel:"components-ui-FileManager-styles__verticalPanel--2B7bUoPh",contentPanel:"components-ui-FileManager-styles__contentPanel--1P9v7wUE",isGridView:"components-ui-FileManager-styles__isGridView--2JVcXa7q",whiteBg:"components-ui-FileManager-styles__whiteBg--qxJIvGzd",imgPreview:"components-ui-FileManager-styles__imgPreview--2KA7Ri-T",text:"components-ui-FileManager-styles__text--1JvIGMqQ",fileType:"components-ui-FileManager-styles__fileType--3aKM4qXg",filePreview:"components-ui-FileManager-styles__filePreview--3z8G2PH4",uploadPreview:"components-ui-FileManager-styles__uploadPreview--ID9TBk3A",uploadPreviewRemove:"components-ui-FileManager-styles__uploadPreviewRemove--XLoWPDV0",uploadPreviewRemoveIcon:"components-ui-FileManager-styles__uploadPreviewRemoveIcon--33jcBoRW",pdf:"components-ui-FileManager-styles__pdf--3sy8lySc",xlsx:"components-ui-FileManager-styles__xlsx--2Y9XVlEb",xls:"components-ui-FileManager-styles__xls--2aN_Ilm9",docx:"components-ui-FileManager-styles__docx--1IqVcv6t",doc:"components-ui-FileManager-styles__doc--25AC1OfF",pptx:"components-ui-FileManager-styles__pptx--2HL_Tlwu",ppt:"components-ui-FileManager-styles__ppt--3HQw8Tea",txt:"components-ui-FileManager-styles__txt--1yBEk0e8",html:"components-ui-FileManager-styles__html--1N2eySXP",psd:"components-ui-FileManager-styles__psd--2p5COJXv",id:"components-ui-FileManager-styles__id--3LT3iMGQ",msg:"components-ui-FileManager-styles__msg--1WCszmh1",img:"components-ui-FileManager-styles__img--2N581bLY",table:"components-ui-FileManager-styles__table--2F2k7m5Z",checkbox:"components-ui-FileManager-styles__checkbox--3a2Ht8YU",uploadBtn:"components-ui-FileManager-styles__uploadBtn--3k1RjKBN"}},1711:function(e,t,a){"use strict";var n=a(31),i=a.n(n),l=a(29),o=a.n(l),r=a(38),s=a.n(r),d=a(25),c=a.n(d),p=a(30),u=a.n(p),m=a(0),f=a.n(m),g=a(1),h=a.n(g),y=a(72),v=a.n(y),F=a(26),b=a(2),C=a(1712),_=a(4),E=a(1197),w=a.n(E),j=a(1198),k=a.n(j),M=function(e){function t(e){o()(this,t);var a=c()(this,(t.__proto__||i()(t)).call(this,e));return a.setItems=function(e){a.orderedList=e,a.saveData()},a.saveData=function(){a.props.setItem({path:"media/folders",strict:!0,noMeta:!0,bypass:!0},a.orderedList)},a.selectedIds=[],a.bulkAction=null,a}return u()(t,e),s()(t,[{key:"showForm",value:function(){if(this.props.firebase){var e=Object(b.get)(this.props.firebase,"media.folders",[]);e=Object(b.isArray)(e)?e:Object(b.toArray)(e);var t={startCollapsed:!1,maxLevels:5,separator:"",fields:["name"]};return f.a.createElement("div",{id:"folderPanel",className:[w.a.paddedHolder,k.a.verticalPanel].join(" ")},f.a.createElement(C.a,{schema:"media/folders",list:e,parentKey:"parentId",idKey:"id",onChange:this.setItems,onClick:this.props.setCurrentFolder,maxLevels:t.maxLevels,showFields:t.fields,separator:t.separator,startCollapsed:t.startCollapsed,toggled:this.props.mediaToggledFolders}))}return null}},{key:"render",value:function(){var e=void 0;return e=this.props.firebase?"Folders":"Loading...",f.a.createElement("div",null,f.a.createElement(v.a,{title:e}),this.showForm())}}]),t}(m.Component);M.propTypes={firebase:h.a.any.isRequired,setItem:h.a.func.isRequired,setCurrentFolder:h.a.func.isRequired,mediaToggledFolders:h.a.array.isRequired};t.a=Object(F.b)(function(e){var t=e.currentProject;return{firebase:t.firebase,mediaToggledFolders:t.mediaToggledFolders}},function(e){return{setItem:function(t,a){return e(_.a.setItem(t,a))}}})(M)},1712:function(e,t,a){"use strict";(function(e){var n=a(34),i=a.n(n),l=a(16),o=a.n(l),r=a(31),s=a.n(r),d=a(29),c=a.n(d),p=a(38),u=a.n(p),m=a(25),f=a.n(m),g=a(30),h=a.n(g),y=a(0),v=a.n(y),F=a(1),b=a.n(F),C=a(26),_=a(1713),E=a.n(_),w=a(2),j=a(1732),k=a(4),M=a(10),O=(a(934),a(1733),a(932),a(933),a(1197)),I=a.n(O),P=function(t){function a(e){c()(this,a);var t=f()(this,(a.__proto__||s()(a)).call(this,e));T.call(t),t.props.list.forEach(function(e){e[t.props.parentKey]=e[t.props.parentKey]?e[t.props.parentKey]:0});var n=Object(M.a)({arr:t.props.list,parentKey:t.props.parentKey});return t.state={sortableList:n,schema:e.schema,loading:!1,editingId:null},t.deleted=[],t}return h()(a,t),u()(a,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({loading:!0});var a=Object(M.a)({arr:e.list,parentKey:this.props.parentKey});this.deleted=[],Object(w.delay)(function(){t.setState({sortableList:a,loading:!1})},10)}},{key:"getChildren",value:function(e,t){for(var a=0;a<t.length;a++)t[a].parentId===e&&(this.getChildren(t[a].id,t),this.deleteIds.push(t[a].id))}},{key:"initSortable",value:function(){var t=this;Object(w.defer)(function(){e(".nested-sortable").nestedSortable({forcePlaceholderSize:!0,listType:"ul",handle:".handle",helper:"original",items:"li",opacity:.6,placeholder:"placeholder",revert:250,tabSize:25,tolerance:"intersect",maxLevels:t.props.maxLevels||5,isTree:!0,expandOnHover:500,startCollapsed:t.props.startCollapsed,update:function(){t.returnOnChange()}})})}},{key:"returnOnChange",value:function(){var t=this;Object(w.defer)(function(){var a=e(".nested-sortable").nestedSortable("toArray");a.shift();var n=Object(w.clone)(t.state.sortableList);n=n.map(function(e){return Object(M.f)(n,e)}),n=Object(w.uniq)(n[0]);var l=(a=a.filter(function(e,a){var i=parseInt(e.item_id,10),l=parseInt(e.parent_id,10)||0,o=Object(w.find)(n,{id:i});return Object(w.assign)(e,o),e[t.props.parentKey]=l,e.order=a,Object(w.indexOf)(t.deleted,i)<0&&e})).map(function(e){return Object(w.omit)(e,["children","parent_id","item_id","depth","left","right"])}).reduce(function(e,t){return o()(e,i()({},t.id,Object(w.omit)(t,"uuid")))},{});t.props.onChange(l)})}},{key:"render",value:function(){var t=this;if(!this.state.loading){this.initSortable();var a=this.state.sortableList.map(function(e){return v.a.createElement(j.a,{key:"item_"+e.id,node:e,onClick:t.props.onClick,onChange:t.handleChange,children:e.children,toggleChildren:t.toggleChildren,schema:t.props.schema,showFields:t.props.showFields,separator:t.props.separator,toggled:t.props.toggled,editing:t.state.editingId,onInputBlur:t.renameFolder,currentFolder:t.props.currentFolder})}),n=[{icon:"",label:"New Folder",function:function(a){return t.addFolder(e(a).closest("li").data("folder-id"))}},{icon:"",label:"Rename",function:function(a){return t.setState({editingId:e(a).closest("li").data("folder-id")})}},{icon:"",label:"Delete",function:function(a){return t.deleteFolder(e(a).closest("li").data("folder-id"))}}];return v.a.createElement("div",{id:"mediaFolders",className:I.a.minFolderPanelHeight},v.a.createElement("ul",{className:"nested-sortable tree"},a),v.a.createElement(E.a,{contextID:"mediaFolders",items:n}))}return null}}]),a}(y.Component);P.propTypes={item:b.a.string,toggled:b.a.array,list:b.a.array,schema:b.a.string,parentKey:b.a.string,separator:b.a.string,showFields:b.a.array,setItem:b.a.func.isRequired,onChange:b.a.func,deleteFiles:b.a.func,setMediaCurrentFolder:b.a.func,toggleMediaSelectedFolders:b.a.func,removeMulti:b.a.func,onClick:b.a.func,folders:b.a.object,currentFolder:b.a.string,files:b.a.object};var T=function(){var t=this;this.addFolder=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Date.now(),i={id:n,uuid:n,name:"",parentId:a,order:0};t.setState({editingId:i.id}),e('[data-folder-id="'+a+'"]').addClass("mjs-nestedSortable-collapsed"),Object(w.includes)(t.props.toggled,a)||t.props.toggleMediaSelectedFolders(a),t.props.setItem("media/folders",i)},this.deleteFolder=function(e){var a=t.props,n=a.files,i=a.folders,l=a.deleteFiles,o=a.removeMulti;t.deleteIds=[e];var r=Object(w.find)(i,{name:"Root"}).id,s=Object(w.toArray)(Object(w.clone)(i));t.getChildren(t.deleteIds[0],s);var d=Object(w.without)(Object(w.map)(n,function(e){var a=e.id,n=e.file,i=e.folderId;return Object(w.includes)(t.deleteIds,i)?{id:a,name:n}:null}),null);t.deleteIds=Object(w.filter)(t.deleteIds,function(e){return e!==r}),l(d,!0),o("media/folders",t.deleteIds,function(){t.deleteIds=null})},this.toggleChildren=function(a,n){a.stopPropagation(),e(a.target).closest("li").toggleClass("mjs-nestedSortable-collapsed"),t.props.toggleMediaSelectedFolders(n)},this.handleChange=function(e){var a=e.target.value,n=e.target.name;a="checkbox"===e.target.type?e.target.checked:a;var i=parseInt(e.target.getAttribute("data-id"),10),l=t.state.sortableList;l=(l=Object(w.flattenDeep)(l)).map(function(e){return Object(M.f)(l,e)}),l=Object(w.uniq)(l[0]);var o=Object(w.find)(l,{id:i});o=o||Object(w.find)(l,{uuid:i});var r=Object(w.indexOf)(l,Object(w.find)(l,{id:i}));o[n]=a,l.splice(r,1,o);var s=Object(M.a)({arr:l,parentKey:t.props.parentKey});t.setState({sortableList:s}),t.returnOnChange()},this.renameFolder=function(e){var a=t.props.folders[t.state.editingId],n=e.target.value;a.name!==n&&"Root"!==a.name&&(a.name=n,t.props.setItem("media/folders/",a)),t.setState({editingId:null})}};t.a=Object(C.b)(function(e){var t=e.currentProject;return{folders:t.firebase.media.folders,files:t.firebase.media.files}},function(e){return{setItem:function(t,a){return e(k.a.setItem(t,a))},removeMulti:function(t,a,n){e(k.a.removeMulti(t,a,n))},deleteFiles:function(t,a){e(k.a.deleteFiles(t,a))},toggleMediaSelectedFolders:function(t){e(k.a.toggleMediaSelectedFolders(t))}}})(P)}).call(this,a(231))},1732:function(e,t,a){"use strict";var n=a(0),i=a.n(n),l=a(1),o=a.n(l),r=a(2),s=a(47),d=function e(t){var a=null,n=function(){if(Object(r.isArray)(t.showFields)&&t.showFields.length){var e=void 0;return t.showFields.forEach(function(a,n){e=n>0?e+" "+t.separator+" "+t.node[a]:t.node[a]||"Empty"}),e}return t.node.name||t.node.title||t.node.heading};t.children&&(a=t.children.map(function(a,n){return i.a.createElement(e,{key:"sub_item_"+n+"_"+t.node.id,node:a,children:a.children,onChange:t.onChange,onClick:t.onClick,deleteItemAction:t.deleteItemAction,deleteAction:t.deleteAction,getListAction:t.getListAction,toggleChildren:t.toggleChildren,schema:t.schema,showFields:t.showFields,separator:t.separator,toggled:t.toggled,editing:t.editing,onInputBlur:t.onInputBlur,currentFolder:t.currentFolder})}));var l="Root"===t.node.name?"":"handle",o=Object(r.includes)(t.toggled,t.node.id)?null:"mjs-nestedSortable-collapsed";return i.a.createElement("li",{"data-folder-id":t.node.id,className:o,id:"item_id_"+t.node.id,key:t.node.id+"_"+t.node.parentIndex,onClick:function(e){return t.onClick(e,t.node.id)}},i.a.createElement("a",{id:"folder_id_"+t.node.id,className:l},i.a.createElement("span",{onClick:function(e){return t.toggleChildren(e,t.node.id)},className:"itemIcon"},a&&i.a.createElement("span",{className:"caret"},i.a.createElement(s.a,{icon:"FaCaretRight",size:16})),i.a.createElement(s.a,{icon:t.node.icon||"FaFolder",size:16})),t.node.id!==t.editing&&n(),t.node.id===t.editing&&i.a.createElement("input",{onClick:function(e){e.stopPropagation()},"data-folder-id":t.node.id,autoFocus:!0,type:"text",defaultValue:n(),onKeyPress:function(e){13!==e.which&&13!==e.keyCode||e.target.blur()},onBlur:function(e){return t.onInputBlur(e)}})),a?i.a.createElement("ul",null,a):null)};d.propTypes={node:o.a.object,schema:o.a.string,editing:o.a.number,currentFolder:o.a.number,children:o.a.array,toggled:o.a.array,onClick:o.a.func,onChange:o.a.func,deleteItemAction:o.a.func,deleteAction:o.a.func,onInputBlur:o.a.func,getListAction:o.a.object,toggleChildren:o.a.func},t.a=d},1733:function(e,t,a){},777:function(e,t,a){"use strict";a.r(t),function(e,n){var i=a(34),l=a.n(i),o=a(16),r=a.n(o),s=a(95),d=a.n(s),c=a(31),p=a.n(c),u=a(29),m=a.n(u),f=a(38),g=a.n(f),h=a(25),y=a.n(h),v=a(30),F=a.n(v),b=a(72),C=a.n(b),_=a(26),E=a(0),w=a.n(E),j=a(1),k=a.n(j),M=a(60),O=a(2),I=a(1676),P=a.n(I),T=a(15),S=a(12),N=a.n(S),x=a(1751),R=a(222),L=a.n(R),U=a(785),B=a.n(U),z=a(352),q=a.n(z),D=a(39),A=a(167),K=a(47),H=a(13),V=a(162),W=a(169),G=a(1711),Z=a(4),J=a(56),X=a(57),Y=a(1198),Q=a.n(Y),$=function(t){function a(e){m()(this,a);var t=y()(this,(a.__proto__||p()(a)).call(this,e));return t.onDrop=function(e,a){t.props.setFilesToUpload(e),a.length&&t.props.addNotification({body:"notifications.file_selection_rejected",type:"warning",attr:{filesCount:a.length},autoClose:2e3})},t.setCurrentFolder=function(e,a){e.stopPropagation(),t.props.setMediaCurrentFolder(a)},t.removeUploadPreview=function(e){return function(a){a.stopPropagation(),a.preventDefault(),t.props.removeUploadPreviewFile(e)}},t.toggleSelected=function(e,a){var n=[];"reset"!==e&&(n=Object(O.cloneDeep)(t.state.selected),a.target.checked?n.push(e):n=n.filter(function(t){return e.id!==t.id})),t.setState({selected:n}),t.props.onChange&&t.props.onChange(n)},t.confirmDelete=function(){var e=w.a.createElement(A.a,{title:"Delete "+(1===t.state.selected.length?"file":"files"),body:"Are you sure you want to delete "+(1===t.state.selected.length?"this file?":"these files?"),type:"error",buttons:[{themeType:"ghost",text:"Cancel",onClick:function(){return t.props.toggleModal({modalId:"contentModal",show:!1})}},{themeType:"error",text:"Delete",onClick:function(){t.props.deleteFiles(t.state.selected),t.props.toggleModal({modalId:"contentModal",show:!1}),t.setState({selected:[]})}}]});t.props.toggleModal({modalId:"contentModal",show:!0,content:e,size:"small"})},t.state={listView:!0,selected:[]},t.filterByFolder=t.filterByFolder.bind(t),t}return F()(a,t),g()(a,[{key:"componentWillMount",value:function(){N.a.modalview("file-manager-modal"),Object(O.isEmpty)(this.props.selected)||this.setState({selected:this.getSelectedFilesFromIds(this.props.selected)}),this.props.mediaCurrentFolder&&this.setCurrentFolderClass(this.props.mediaCurrentFolder),this.props.mediaTypes&&1===this.props.mediaTypes.length&&this.props.setMediaType(this.props.mediaTypes[0])}},{key:"componentWillReceiveProps",value:function(e){e.mediaTypes&&1===e.mediaTypes.length&&this.props.mediaType!==e.mediaTypes[0]&&e.setMediaType(e.mediaTypes[0]),this.setCurrentFolderClass(e.mediaCurrentFolder)}},{key:"componentWillUnmount",value:function(){this.setState({selected:[]}),this.props.setFileUploadLoadState(!1)}},{key:"getSelectedFilesFromIds",value:function(e){var t=this;return Object(O.without)(e.map(function(e){return Object(O.get)(t.props.firebase,"media.files."+e)?{id:e,name:t.props.firebase.media.files[e]}:null}),null)}},{key:"getUploadPreview",value:function(e,t){var a=Object(O.get)(e,"name","").split(".").pop().toLowerCase();return w.a.createElement("span",{key:"upload_image_preview_"+t,className:Q.a.uploadPreview},e&&e.type&&-1!==e.type.indexOf("image")?w.a.createElement("img",{role:"presentation",src:e.preview}):w.a.createElement("div",{key:e.id,className:[Q.a.whiteBg,Q.a.filePreview].join(" ")},w.a.createElement(K.a,{className:Q.a[a],icon:"FaFileO",color:"#bdc3c7",size:48}),w.a.createElement("span",{className:Q.a.text,style:{paddingBottom:"10px"}},e.name)),w.a.createElement("a",{className:Q.a.uploadPreviewRemove,title:"Remove file: "+(e.name||""),onClick:this.removeUploadPreview(e)},w.a.createElement("span",{className:Q.a.uploadPreviewRemoveIcon},w.a.createElement(q.a,null))))}},{key:"setCurrentFolderClass",value:function(t){Object(O.defer)(function(){e(".itemIcon").removeClass("active"),e('[data-folder-id="'+t+'"]').find(".itemIcon:first").addClass("active")})}},{key:"filterByFolder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(O.find)(Object(O.get)(this.props.firebase,"media.folders",{}),{name:"Root"})||{},a=this.props.mediaCurrentFolder||t.id;return Object(O.filter)(Object(O.cloneDeep)(e),{folderId:a})}},{key:"isChecked",value:function(e){return!!this.state.selected.length&&this.state.selected.some(function(t){return t.id===e})}},{key:"showImages",value:function(){var e=this;if(this.props.firebase){var t=X.a.getStorageThumbURL(this.props.projectId);if("images"===this.props.mediaType&&Object(O.get)(this.props.firebase,"media.files")){return(P()(this.filterByFolder,function(e){return d()(e).reduce(function(t,a){var n=e[a];return"images"===n.type?r()({},t,l()({},a,n)):t},{})})(Object(O.get)(this.props.firebase,"media.files",{}))||[]).map(function(a){var n="media_"+a.id;return e.state.listView?w.a.createElement(B.a,{key:a.id,height:100,offset:100,placeholder:w.a.createElement("tr",{style:{height:56},className:"lazyload-placeholder"}),overflow:!0,once:!0},w.a.createElement("tr",null,w.a.createElement("td",{className:Q.a.checkbox},w.a.createElement("label",{htmlFor:n},w.a.createElement(H.b,{inputProps:{disabled:!e.isChecked(a.id)&&e.props.limit&&e.state.selected.length===e.props.limit,id:n,name:n,onChange:function(t){return e.toggleSelected({id:a.id,name:a.file},t)},checked:e.isChecked(a.id)}}))),w.a.createElement("td",{className:Q.a.filePreview},w.a.createElement("img",{className:Q.a.img,src:""+t+a.file+"?alt=media",role:"presentation"})),w.a.createElement("td",null,a.file),w.a.createElement("td",{width:"10"},w.a.createElement(L.a,{text:""+X.a.getStorageMediaURL(e.props.projectId)+a.file+"?alt=media",onCopy:function(){return e.props.addNotification({body:"notifications.copied_link_success",type:"info",autoClose:1500})}},w.a.createElement(D.a,{noMargin:!0},"Copy Link"))))):w.a.createElement(B.a,{key:a.id,height:200,offset:100,overflow:!0,once:!0},w.a.createElement("div",{className:Q.a.imgHolder},w.a.createElement("label",{htmlFor:n},w.a.createElement(H.b,{inputProps:{disabled:!e.isChecked(a.id)&&e.props.limit&&e.state.selected.length===e.props.limit,id:n,name:n,onChange:function(t){return e.toggleSelected({id:a.id,name:a.file},t)},checked:e.isChecked(a.id)}})),w.a.createElement("img",{className:Q.a.img,src:""+t+a.file+"?alt=media",role:"presentation"})))})}if("files"===this.props.mediaType&&Object(O.get)(this.props.firebase,"media.files")){var a=void 0;return(P()(this.filterByFolder,function(e){return d()(e).reduce(function(t,a){var n=e[a];return"files"===n.type?r()({},t,l()({},a,n)):t},{})})(Object(O.get)(this.props.firebase,"media.files",{}))||[]).map(function(t){var n="media_"+t.id;return a=t.file.split(".").pop().toLowerCase(),e.state.listView?w.a.createElement("tr",{key:t.id},w.a.createElement("td",{className:Q.a.checkbox},w.a.createElement("label",{htmlFor:n},w.a.createElement(H.b,{inputProps:{disabled:!e.isChecked(t.id)&&e.props.limit&&e.state.selected.length===e.props.limit,id:n,name:n,onChange:function(a){return e.toggleSelected({id:t.id,name:t.file},a)},checked:e.isChecked(t.id)}}))),w.a.createElement("td",{className:Q.a.filePreview},w.a.createElement(K.a,{className:Q.a[a],icon:"FaFileO"}),w.a.createElement("span",{className:[Q.a[a],Q.a.fileType].join(" ")},a)),w.a.createElement("td",null,t.file),w.a.createElement("td",{width:"10"},w.a.createElement(L.a,{text:""+X.a.getStorageMediaURL(e.props.projectId)+t.file+"?alt=media",onCopy:function(){return e.props.addNotification({body:"notifications.copied_link_success",type:"info",autoClose:1500})}},w.a.createElement(D.a,{noMargin:!0},"Copy Link")))):w.a.createElement("div",{key:t.id,className:[Q.a.imgHolder,Q.a.whiteBg,Q.a.filePreview].join(" ")},w.a.createElement("label",{htmlFor:n},w.a.createElement(H.b,{inputProps:{disabled:!e.isChecked(t.id)&&e.props.limit&&e.state.selected.length===e.props.limit,id:n,name:n,onChange:function(a){return e.toggleSelected({id:t.id,name:t.file},a)},checked:e.isChecked(t.id)}})),w.a.createElement(K.a,{className:Q.a[a],icon:"FaFileO",color:"#bdc3c7",size:48}),w.a.createElement("span",{className:[Q.a[a],Q.a.fileType].join(" ")},a),w.a.createElement("span",{className:Q.a.text},t.file))})}return w.a.createElement("tr",null,w.a.createElement("td",null,"You currently do not have any ",this.props.mediaType))}return w.a.createElement("tr",null,w.a.createElement("td",null,"Loading..."))}},{key:"render",value:function(){var e=this,t=void 0;t=this.props.firebase?"Media":"Loading...";var a=this.props,n=a.className,i=a.onChange,l=a.toggleModal,o=a.mediaType,r=a.mediaTypes,s=a.setMediaType,d=a.allowedFileTypes,c=a.uploadFileCount,p=a.handleFileUpload,u=a.mediaCurrentFolder,m=a.firebase,f=a.uploadFiles,g=a.loading,h=Object(J.b)({userPermissions:this.context.userPermissions,type:"modules",module:"media",action:"delete"});return w.a.createElement("div",{className:n},w.a.createElement(C.a,{title:t}),w.a.createElement(W.a,{title:t,hasShadow:!0},w.a.createElement(D.a,{onClick:function(){return e.setState({listView:!e.state.listView})},iconOnly:!0},this.state.listView?w.a.createElement(K.a,{key:Date.now(),icon:"FaTh"}):w.a.createElement(K.a,{key:Date.now(),icon:"FaList"})),this.state.selected.length>0&&h&&!i&&w.a.createElement(D.a,{onClick:this.confirmDelete},"Delete"),w.a.createElement(D.a,{onClick:function(){return l({modalId:"mediaModal",show:!1})}},"Close")),w.a.createElement(T.Row,{className:Q.a.fileManager},w.a.createElement(T.Col,{className:[Q.a.verticalPanel,Q.a.optionPanel].join(" ")},(!r||Object(O.includes)(r,"images"))&&w.a.createElement("span",{onClick:function(){s("images")},className:"images"===o?[Q.a.mediaOption,Q.a.mediaOptionSelected].join(" "):Q.a.mediaOption,title:"Images"},w.a.createElement(K.a,{icon:"FaImage",color:"images"===o?"#222":"#bdc3c7",size:32})),(!r||Object(O.includes)(r,"files"))&&w.a.createElement("span",{onClick:function(){s("files")},className:"files"===o?[Q.a.mediaOption,Q.a.mediaOptionSelected].join(" "):Q.a.mediaOption,title:"Files"},w.a.createElement(K.a,{icon:"FaFileO",color:"files"===o?"#222":"#bdc3c7",size:32}))),w.a.createElement(T.Col,{className:Q.a.folderPanel},w.a.createElement(G.a,{setCurrentFolder:this.setCurrentFolder})),w.a.createElement(T.Col,{className:[Q.a.verticalPanel,Q.a.contentPanel,this.state.listView?"":Q.a.isGridView].join(" ")},this.state.listView?w.a.createElement("table",{className:Q.a.table},w.a.createElement("tbody",null,this.showImages())):this.showImages())),w.a.createElement(T.Row,{className:Q.a.fileManager},w.a.createElement("div",{style:{width:"100%"}},w.a.createElement(x.a,{className:Q.a.dropZone,onDrop:this.onDrop,accept:"images"===o?"image/*":d.join(", "),disabled:Boolean(g&&f.length),disableClick:Boolean(g&&f.length)},c>0?w.a.createElement("div",{className:Q.a.imgHolder},w.a.createElement("h5",null,w.a.createElement(D.a,{onClick:function(t){t.stopPropagation(),p({folderId:u||Object(O.find)(Object(O.get)(m,"media.folders",{}),{name:"Root"}).id,files:f,imgSizes:e.props.imageSizes})}},g?w.a.createElement("span",{className:Q.a.uploadBtn},w.a.createElement(V.a,{loading:!0})," Uploading..."):1===c?"Upload File":"Upload "+c+" Files")),w.a.createElement("div",{className:Q.a.imgPreview},f.map(function(t,a){return e.getUploadPreview(t,a)}))):w.a.createElement("div",{className:Q.a.dropZoneText},"Drag and drop files here to upload",w.a.createElement("span",null),w.a.createElement(D.a,null,"Browse files"))))))}}]),a}(E.Component);$.defaultProps={thumbSize:240,allowedFileTypes:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/docx","application/msword","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/*","text/*","video/*","font/*","audio/*"]},$.propTypes={className:k.a.string,mediaCurrentFolder:k.a.number,allowedFileTypes:k.a.array,mediaTypes:k.a.array,selected:k.a.array,uploadFileCount:k.a.number,limit:k.a.number,firebase:k.a.any,loading:k.a.bool,mediaType:k.a.string,thumbSize:k.a.number,projectId:k.a.string.isRequired,onChange:k.a.func,toggleModal:k.a.func.isRequired,handleFileUpload:k.a.func.isRequired,setFilesToUpload:k.a.func.isRequired,setFileUploadLoadState:k.a.func.isRequired,removeUploadPreviewFile:k.a.func.isRequired,setMediaType:k.a.func.isRequired,deleteFiles:k.a.func.isRequired,setMediaCurrentFolder:k.a.func.isRequired,uploadFiles:k.a.array,imageSizes:k.a.array.isRequired,addNotification:k.a.func.isRequired},$.contextTypes={userPermissions:k.a.object};t.default=Object(_.b)(function(e){var t=e.currentProject;return{firebase:t.firebase,loading:t.fileUploadLoading,uploadFiles:t.uploadFiles,uploadFileCount:t.uploadFileCount,mediaType:t.mediaType,mediaCurrentFolder:t.mediaCurrentFolder,imageSizes:Object(O.get)(t,"firebase.settings.general.imageSizes",[]),projectId:t.project}},function(e){return{toggleModal:function(t){var a=t.modalId,n=t.show,i=t.content,l=t.size;e(Z.a.toggleModal({modalId:a,show:n,content:i,size:l}))},removeUploadPreviewFile:function(t){e(Z.a.removeUploadPreviewFile(t))},setFilesToUpload:function(t){e(Z.a.setFilesToUpload(t))},setFileUploadLoadState:function(t){e(Z.a.setFileUploadLoadState(t))},handleFileUpload:function(t){var a=t.folderId,n=t.files,i=t.imgSizes;e(Z.a.handleFileUpload({folderId:a,files:n,imgSizes:i}))},setMediaType:function(t){e(Z.a.setMediaType(t))},setMediaCurrentFolder:function(t){e(Z.a.setMediaCurrentFolder(t))},deleteFiles:function(t){e(Z.a.deleteFiles(t))}}})(Object(M.hot)(n)($))}.call(this,a(231),a(94)(e))}}]);